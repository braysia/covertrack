# covertrack

Covert lab pipeline to analyze the fluorescent live-cell imaging data.   For filtering/visualization of the results, see covertrace.  

---
Operations will be generated by feeding input arguments into `SettingUpCaller`.

```
+----------------------------+  
|  Settingup operations      |  
+-------------+--------------+  
              |
              | setting.json
              v
+----------------------------+  
|  Preprocessing operations  |  
+-------------+--------------+  
              |
              | images in processed/
              v
+----------------------------+  
|  Segmentation operations   |  
+-------------+--------------+  
              |
              | uint16 labels in segmented/
              v
+----------------------------+  
|  Tracking operations       |  
+-------------+--------------+  
              |
              | uint16 labels in tracked/
              v
+----------------------------+  
|  Postprocessing operations |  
+-------------+--------------+  
              | ini_df.npz
              | uint16 labels in objects/
              |                          +----------------------------+  
              +------------------------->|  Subdetection operations   |  
              |                          +-------------+--------------+  
              v                                        |
+----------------------------+                         |  uint16 labels in objects/
|  ApplyObjects              |  <----------------------+
+-------------+--------------+  
              | 
              | df.npz
              v
         Covertrace

```



### Installation
```
git clone https://github.com/braysia/covertrack.git
cd covertrack
python setup.py install
```
[imagemagick](http://www.imagemagick.org/script/index.php) is required.  
For futher details see [here](https://gist.github.com/braysia/ee6f6a946274b228e3a8c7df352c8055).

### Installing required python packages
```
cat requirements.txt | xargs -n 1 pip install
```

### Test
For a quick run, run `./tests/tests.sh`.  
The results will be written in `tests/output/testimages/`. Check images in `tests/output/testimages/objects` to see how segmentation and tracking worked.  

To do a test run for bigger images, run `./tests/tests2.sh`. The results will be stored in `tests/output/testimages2/`.  


### Examples
```
covertrack input_file/input_tests1.py
```
See `covertrack --help` for more options.  
  
See [input_file](input_file/) directory for examples of input arguments.  
Or see [HOW_TO_WRITE_INPUT_FILE](doc/HOW_TO_WRITE_INPUT_FILE.md).
